[envs.changelog]
dependencies = ["scriv"]
detached = true
installer = "uv"
scripts = {add = "scriv create --add", collect = ["scriv collect --add", "- pre-commit run --files=CHANGELOG.md > /dev/null"]}

[envs.default]
dependencies = [
  "pre-commit"
]
installer = "uv"

[envs.default.scripts]
example = "hatch run examples:example"
lint = ["hatch run npm:lint", "pre-commit run {args} --all-files"]
prep-release = [
  "npm version {args} --no-git-tag-version",
  "hatch run changelog:collect",
  "hatch run changelog:add",
  'echo "Now raise a PR to merge into main with title: [Release] Release of vizro-dash-components"'
]

[envs.examples]
features = ["dev"]
installer = "uv"

[envs.examples.scripts]
example = "python usage.py"

# Detached env for npm commands. Requires dash[dev] on PATH for `npm run build`
# (install via `pip install -e ".[dev]"`).
[envs.npm]
detached = true

[envs.npm.scripts]
build = "npm run build"
fmt = "npm run fmt:js"
install = "npm install --legacy-peer-deps"
lint = "npm run lint:js"
