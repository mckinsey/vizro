# Cursor and Vizro-MCP tutorial

## About this tutorial

This tutorial uses a public dataset of [names in songs](https://github.com/the-pudding/data/tree/master/names-in-songs) from [The Pudding](https://pudding.cool/), which was used in a [story about the names that occur in popular songs](https://pudding.cool/2019/05/names-in-songs/).

We will pass links to this data to Vizro-MCP to create a single Vizro chart.

## Set up Vizro-MCP

Before creating a Vizro dashboard with Vizro-MCP, you need to configure your MCP host. Follow our instructions to [set up Cursor](../guides/set-up-vizro-mcp-with-cursor.md), which is what this tutorial assumes you will work with.

(Alternatively, you can [set up Claude Desktop](../guides/set-up-vizro-mcp-with-claude), or [set up VS Code](../guides/set-up-vizro-mcp-with-vscode.md), or use our [basic setup configuration](../guides/set-up-vizro-mcp-basics.md) for your preferred LLM).

To check that Cursor is correctly set up to use Vizro-MCP, pass in a prompt:

> Can you access Vizro-MCP?

The response received should be similar to the following:

Yes! I do have access to Vizro-MCP tools. I can see several Vizro MCP functions available that allow me to help you create charts and dashboards using Vizro.
Here's what I can do with Vizro-MCP:

**Available Vizro-MCP Capabilities:**
1. Get chart/dashboard creation plans - Get instructions for creating Vizro charts or dashboards
1. Access model schemas - Get JSON schemas for Vizro models (like Card, Dashboard, Page)
1. Work with sample data - Access sample datasets (iris, tips, stocks, gapminder)
1. Analyze your data - Load and analyze data files (CSV, JSON, Excel, Parquet, etc.)
1. Validate configurations - Validate Vizro dashboard configurations and generate Python code
1. Validate custom charts - Validate custom chart code with PyCafe integration

## Strategy

There is no single, correct way to use Vizro-MCP. You will find your own preferred way of entering prompts and giving feedback on the results. 

In this tutorial, we will create a Vizro chart by passing a simple prompt to Cursor and then iterating upon it. We'll show the exact prompts and chart output to illustrate the process.

## Initial prompt

We are going to pass in a prompt to create a treemap chart that shows the hierarchy of artists who have created the most songs with names in them. We ask Cursor to do some basic pre-processing of the data before using it, to eliminate usage of words that are probably not intended to be names (such as "Baby", or brand names like "Calvin Klein", or months such as "April, and so on). Here is the initial prompt, which I passed to Cursor to use with `claude-4-sonnet`:

> I would like you to create a single Vizro chart. Use https://raw.githubusercontent.com/the-pudding/data/master/names-in-songs/unique.csv and preprocess the data to remove all rows where person==FALSE and all rows where name==Baby. Remove any null values. I would like you to identify the artists that use the most different names in their songs. Find the top 20 artists. Plot a treemap which shows each artist and sizes their boxes according to the number of different names they've used. For each artist, in the treemap, show separate boxes for each name, and size them according to the number of different songs that artist has used that name.

Cursor will run and ask to run `get_vizro_chart_or_dashboard_plan`, which you should accept by clicking `Run tool`, and similarly accept any other steps that Cursor suggests.
![](../../assets/images/get_chart_or_dashboard_plan.png)
 

When Cursor is satisfied that the configuration is valid, it opens an instance of [PyCafe](https://py.cafe/) and displays the code and Vizro visualization. The exact result depends on the LLM and what you receive may vary. 

![](../../assets/images/treemap-iteration1.png)

!!! Tip "PyCafe cannot display charts that use local data"

    PyCafe will only open if your chart or dashboard uses data that can be accessed by downloading it from a public link, rather than locally stored data. If your data is private and cannot be stored online, you should run the chart code generated by Cursor and create a `.py` file to run locally so it can access the data.

## Iteration


> It's looking good. I'd like to change the labels now. For each of the 20 boxes at the top of the hierarchy I'd like to see the number of names used in brackets. So for example 'Ray Stevens (20 names)'. The hovertext should just show artist and songcount, don't show parent and id. At the next level of hierarchy, I'd like to see each name on the box where it fits and the hovertext should show name and songcount (don't show parent and id). Can you go to another level of hierarchy and show boxes for each of the songs for each name?

![](../../assets/images/treemap-iteration2.png)

## Iteration


> Let's cut down on the number of artists to make it easier to fit in. Let's just do the top 10 artists. Can you remove the Value field from all the labels too, as I don't want to see that.

![](../../assets/images/treemap-iteration3.png)

## Iteration


> Let's experiment by changing the hierarchy slightly. Can you now show Artist -> Song -> Name count instead. So you show the same 10 artists but the boxes in their names are the different songs they've released that contain names. And the boxes in those songs are the different names.

![](../../assets/images/treemap-iteration4.png)


## Final Result

- **Top 10 artists** who use the most names
- **3-level hierarchy:** Artist → Song → Name
- **Clean labels and hover text:** Artist shows "(X names)", songs and names show titles only. No value/parent/id clutter.

See the project here: https://py.cafe/app/stichbury/vizro-top-artists-unique-names

See the code here: https://py.cafe/stichbury/vizro-top-artists-unique-names# Claude Desktop and Vizro-MCP tutorial

