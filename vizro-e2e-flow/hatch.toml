[envs.changelog]
dependencies = ["scriv"]
detached = true
installer = "uv"
scripts = {add = "scriv create --add", collect = ["scriv collect --add", "- pre-commit run --files=CHANGELOG.md > /dev/null"]}

[envs.default]
dependencies = ["pre-commit"]
detached = true
installer = "uv"

[envs.default.scripts]
lint = "pre-commit run {args} --all-files"
prep-release = [
  "hatch version release",
  "hatch run changelog:collect",
  "hatch run changelog:add",
  'echo "Release $(hatch version) prepared. Commit and push to pass CI checks."'
]

[version]
path = ".claude-plugin/plugin.json"
pattern = '''"version":\s*"(?P<version>[^"]+)"'''
