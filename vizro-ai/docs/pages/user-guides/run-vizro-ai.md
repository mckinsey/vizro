# How to run Vizro-AI

This guide offers insights into different ways of running the `chart_agent` to generate Plotly charts.

## Synchronous execution

The simplest way to run the `chart_agent` is using `run_sync()`, which is perfect for scripts and notebooks.

### Jupyter Notebook

!!! note "Required for Jupyter Notebooks"

    For Vizro-AI to work properly in Jupyter Notebooks, you must add the following two lines at the beginning of your notebook:

    ```py
    import nest_asyncio
    nest_asyncio.apply()
    ```

    This is required because of conflicts between Jupyter's event loop and Pydantic AI's event loop. For more details, see the [Pydantic AI troubleshooting guide](https://ai.pydantic.dev/troubleshooting/#jupyter-notebook-errors).

To run Vizro-AI code in a Jupyter Notebook, create a new cell and execute the code below to render the described visualization as output.

??? note "Note: API key"

    Make sure you have followed the [LLM setup guide](install.md#set-up-access-to-a-large-language-model) and that your API key is available to the model.

!!! example "Ask Vizro-AI to generate a bar chart"

    === "Code for the cell"

        ```py
        import plotly.express as px
        from pydantic_ai.models.openai import OpenAIChatModel
        from pydantic_ai.providers.openai import OpenAIProvider
        from vizro_ai.agents import chart_agent

        model = OpenAIChatModel(
            "gpt-5-nano-2025-08-07",
            provider=OpenAIProvider(api_key="your-api-key-here"),
        )

        df = px.data.gapminder()
        result = chart_agent.run_sync(
            model=model,
            user_prompt="visualize the life expectancy per continent and color each continent",
            deps=df,
        )
        result.output.get_fig_object(df, vizro=True)
        ```

    === "Result"

        [![BarChart]][barchart]

Note that if you run this code, its appearance may not precisely resemble the one displayed, as it is generated by a generative AI and can vary.

### Python script

You can use Vizro-AI in any standard development environment by creating a `.py` file and executing the code, which displays the output in a browser window.

??? note "Note: API key"

    Make sure you have followed the [LLM setup guide](install.md#set-up-access-to-a-large-language-model) and that your API key is available to the model.

!!! example "Ask Vizro-AI to generate a line chart"

    === "example.py"

        ```py
        import plotly.express as px
        from pydantic_ai.models.openai import OpenAIChatModel
        from pydantic_ai.providers.openai import OpenAIProvider
        from vizro_ai.agents import chart_agent

        model = OpenAIChatModel(
            "gpt-5-nano-2025-08-07",
            provider=OpenAIProvider(api_key="your-api-key-here"),
        )

        df = px.data.gapminder()
        result = chart_agent.run_sync(
            model=model,
            user_prompt="describe life expectancy per continent over time",
            deps=df,
        )
        fig = result.output.get_fig_object(df, vizro=True)
        fig.show()
        ```

    === "Result"

        [![LineChart]][linechart]

## Learn more

For more advanced options, see the [advanced options guide](advanced-options.md).

[barchart]: ../../assets/user_guides/bar_chart_gdp_per_continent.png
[linechart]: ../../assets/user_guides/line_chart_life_expect.png
