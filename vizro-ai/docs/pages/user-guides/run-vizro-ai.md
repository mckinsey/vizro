# How to run Vizro-AI

This guide offers insights into different ways of running the `chart_agent` to generate Plotly charts.

!!! note "You need to have an API key from a LLM provider"

    The examples in this guide assume you have an API key from OpenAI. In this case you need to install Vizro-AI with the `[openai]` extra.

    ```bash
    pip install vizro_ai[openai]
    ```

    For other LLM providers, you can install Vizro-AI with the corresponding extra. See the [installation guide](install.md) and [model setup guide](customize-vizro-ai.md) for more details.

## Synchronous execution

The simplest way to run the `chart_agent` is using `run_sync()`, which is perfect for scripts and notebooks.

### Jupyter Notebook

!!! note "Required for Jupyter Notebooks"

    For Vizro-AI to work properly in Jupyter Notebooks, you must add the following two lines at the beginning of your notebook:

    ```py
    import nest_asyncio
    nest_asyncio.apply()
    ```

    This is required because of conflicts between Jupyter's event loop and Pydantic AI's event loop. For more details, see the [Pydantic AI troubleshooting guide](https://ai.pydantic.dev/troubleshooting/#jupyter-notebook-errors).

To run Vizro-AI code in a Jupyter Notebook, create a new cell and execute the code below to render the described visualization as output.

??? note "Note: API key"

    Make sure you have followed the [LLM setup guide](install.md#set-up-access-to-a-large-language-model) and that your API key is available to the model.

!!! example "Vizro-AI in a Jupyter Notebook"

    === "Code for the cell"

        ```py
        import plotly.express as px
        from pydantic_ai.models.openai import OpenAIChatModel
        from pydantic_ai.providers.openai import OpenAIProvider
        from vizro_ai.agents import chart_agent

        model = OpenAIChatModel(
            "gpt-5-nano-2025-08-07",
            provider=OpenAIProvider(api_key="your-api-key-here"),
        )

        df = px.data.gapminder()
        result = chart_agent.run_sync(
            model=model,
            user_prompt="visualize the life expectancy per continent and color each continent",
            deps=df,
        )
        result.output.get_fig_object(df, vizro=False)
        ```

    === "Result"

        [![Agent_1]][agent_1]

Note that if you run this code, its appearance may not precisely resemble the one displayed, as it is generated by a generative AI and can vary.

### Python script

You can use Vizro-AI in any standard development environment by creating a `.py` file and executing the code, which displays the output in a browser window.

??? note "Note: API key"

    Make sure you have followed the [LLM setup guide](install.md#set-up-access-to-a-large-language-model) and that your API key is available to the model.

!!! example "Vizro-AI in a Python script"

    === "example.py"

        ```py
        import plotly.express as px
        from pydantic_ai.models.openai import OpenAIChatModel
        from pydantic_ai.providers.openai import OpenAIProvider
        from vizro_ai.agents import chart_agent

        model = OpenAIChatModel(
            "gpt-5-nano-2025-08-07",
            provider=OpenAIProvider(api_key="your-api-key-here"),
        )

        df = px.data.gapminder()
        result = chart_agent.run_sync(
            model=model,
            user_prompt="describe life expectancy per continent over time",
            deps=df,
        )
        fig = result.output.get_fig_object(df, vizro=False)
        fig.show()
        ```

    === "Result"

        [![Agent_2]][agent_2]

## Learn more

For more advanced options, see the [advanced options guide](advanced-options.md).

[agent_1]: ../../assets/user_guides/chart_agent_1.png
[agent_2]: ../../assets/user_guides/chart_agent_2.png
